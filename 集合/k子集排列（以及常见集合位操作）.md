# K子集组合（以及常见集合操作）

所谓k子集排列就是从n个元素中选取k($1<=k<=n$)个元素，并求其所有组合。

我们可以使用位运算解决



对于从n个元素中选取k个元素，我们设一个新变量comb = (1<<k)-1。注意该变量的二进制表示，它的最后k位都为1。

此时已经是一种情况。并且是最大的一种情况。为了使最后的组合有序，我们应该以升序求下一个情况。比如对于00011111，它的下一种情况为：00101111

求得下一种情况的方法：

x = comb & -comb	// 此时x为最低位的1，00000001

y = comb + x		// y将最低位的1所在的连续1区间置为0，并将该区间左侧相邻的0变为1，00100000

z = comb & ~y		// comb 加上x没有变化的位全部置零，即得到包含最低位的1的连续1区间，00011111

a = z/x			// 将z不断右移直到最后一位为1，00011111

b = a>>1		   // 将最后一位的1右移出去，00001111

c = b|y		      // 将其和b取或就得到下一个情况，00101111



写成c++代码

```c++
int comb = (1<<k)-1;
while(comb << 1<<n){
	/*
		process code
	*/
    int x = comb & -comb;
    int y = comb + x;
    comb = ((comb & ~y)/x>>1)|y;
}
```





附上常见用于集合的位操作

>1 << i		// 只含有第i个元素的集合
>
>(1<<n)-1	// 含有n个元素的集合
>
>if(S>>i & 1)	// 判断第i个元素是否在集合S中
>
>S | 1<<i	// 在集合S中加入第i个元素
>
>S & ~(1<<i)	// 在集合S中去除第i个元素
>
>S | T		// S和T的并集
>
>S & T		// S和T的交集